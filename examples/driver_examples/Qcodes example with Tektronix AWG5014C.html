<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" sizes="310x346" href="../../_static/qcodes_favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QCoDeS Example with Tektronix AWG5014 &mdash; QCoDeS 0.27.0.dev9139 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=9e84aeb3"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="QCoDeS Example with Tektronix AWG70002A" href="Qcodes%20example%20with%20Tektronix%20AWG70002A.html" />
    <link rel="prev" title="QCoDeS Example with Standford Research SR86x Lock-in Amplifier with Buffered Readout" href="Qcodes%20example%20with%20Stanford%20SR86x%20with%20buffered%20readout.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            QCoDeS
          </a>
              <div class="version">
                0.27.0.dev9139+main.g009ec80fb
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15_minutes_to_QCoDeS.html">15 minutes to QCoDeS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#dataset">DataSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plotting">Plotting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#drivers">Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20Example%20with%20Keysight%20E4980A%20LCR%20meter.html">QCoDeS Example with Keysight E4980A LCR meter</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20Example%20with%20Yokogawa%20GS200%20and%20Keithley%207510.html">QCoDeS Example with Yokogawa GS200 and Keithley 7510 Multimeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20example%20with%20Aim%20TTi%20PL601-P.html">QCoDeS example with Aim TTi PL601-P</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20example%20with%20DelegateInstrument.html">Qcodes example with DelegateInstrument driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20example%20with%20Galil%20DMC4133%20Controller.html">QCoDeS example with Galil DMC4133 Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20example%20with%20InstrumentGroup%20and%20DelegateInstrument.html">Qcodes example with InstrumentGroup driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCoDeS%20example%20with%20Keithley%203706A%20System%20Switch.html">QCoDeS example with Keithley 3706A System Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes%20example%20with%20Keithley%20S46.html">QCoDeS Example with Tektronix Keithley S46</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes%20example%20with%20Rigol%20DG1062.html">QCoDeS Example with the Rigol DG 1062 Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes%20example%20with%20Tektronix%20DPO%2072004C.html">QCoDeS example with Textronix DPO 7200xx scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20AMI430.html">QCoDeS Example with AMI430</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Agilent%2034400A.html">QCoDeS Example with Agilent 34400A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Alazar%20ATS9360.html">QCoDeS Example with Alazar ATS 9360</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Basel%20SP983c%20Preamp.html">Qcodes example with Basel SP983c Preamp and its Remote SP983a</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Cryomagnetics4G.html">Cryomagnetics 4G QCoDeS Driver Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20DynaCool%20PPMS.html">QCoDeS Example with DynaCool PPMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20HP8753D.html">QCoDeS Example with HP8753D</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Ithaco.html">QCoDeS Example with Itacho</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keithley%202600.html">QCoDeS Example with with Keithley 2600 series</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keithley%207510.html">QCoDeS Example with Tektronix Keithley 7510 Multimeter</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%2033500B.html">QCoDeS Example with Keysight 33500B</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20344xxA.html">QCoDeS Example with Keysight 344xxA</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%2034980A%20Switch%20Mainframe%20and%20Modules.html">QCoDeS Example with Keysight 34980A Multifunction Switch / Measure Mainframe and Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20B1500%20Parameter%20Analyzer.html">Qcodes example with Keysight B1500 Semiconductor Parameter Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20B2200%20Series%20Femto%20Leakage%20Switch%20Matrix.html">QCoDeS Example with Keysight B2200 Series Femto Leakage Switch Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20Infiniium%20Oscilloscope.html">QCoDeS Example with Keysight Infiniium Oscilloscopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20N9030B.html">Qcodes example with Keysight N9030B</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Keysight%20Network%20Analyzer.html">QCoDeS Example with Keysight Network Analyzers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Lakeshore%20325.html">QCoDeS Example with Lakeshore 325</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Lakeshore%20336%20or%20372%20-%20Bluefors%20T%20control.html">QCoDeS Example with the Lakeshore Model 372 to Control the Temperature of the Bluefors Fridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Minicircuits%20Switch%20boxes%20%28USB-XSPDT%29.html">QCoDeS Example with Minicircuits Switch Boxes Controlled via USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Oxford%20Mercury%20iPS.html">QCoDeS Example with Mercury iPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Oxford%20Triton.html">QCoDeS Example with Oxford Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20QDev_QDac.html">QCoDeS Example with QDac_channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Rigol%20DP832.html">QCoDeS Example with Rigol DP832 Power Supply</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Rigol%20DS1074Z.html">QCoDeS Example with the Rigol DS 1074 Z oscilloscope</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Rohde%20Schwarz%20RTO%201000%20series%20Oscilloscope.html">QCoDeS Example with Rohde Schwarz RTO 1000 Series Oscilloscope</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Rohde%20Schwarz%20SGS100A.html">QCoDeS Example with Rohde Schwarz SGS100A RF source</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Rohde%20Schwarz%20ZNB.html">QCoDeS Example with Rohde Schwarz ZNB20/8</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Stahl.html">QCoDeS Example with the Stahl Bias Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Stanford%20SR830.html">QCoDeS Example with Stanford SR830</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Stanford%20SR86x%20with%20buffered%20readout.html">QCoDeS Example with Standford Research SR86x Lock-in Amplifier with Buffered Readout</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">QCoDeS Example with Tektronix AWG5014</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Table-of-contents">Table of contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Imports-and-initialisation">Imports and initialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#SENDING-WAVEFORMS">SENDING WAVEFORMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Running-the-AWG-in-lazy-mode">Running the AWG in lazy mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Tektronix%20AWG70002A.html">QCoDeS Example with Tektronix AWG70002A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Tektronix%20TPS2012.html">QCoDeS Example with Tektronix TPS2012</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20Yokogawa%20GS2xx.html">QCoDeS Example with Yokogawa GS200/GS210</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%20example%20with%20keithley%202450.html">QCoDeS Example with Tektronix Keithley 2450 Source Meter</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes%2Bbroadbean%20example%20with%20Tektronix%20AWG5208.html">QCoDeS+Broadbean Example with Tektronix AWG5208</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes-example-with-Signal-Hound-USB-SA124B.html">QCoDeS Example with Signal Hound USB-SA124B</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes-example-with-Signal-Hound-USB-SA124B-ParameterWithSetpoints.html">QCoDeS Example with Signal Hound USB-SA124B ParameterWithSetpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#writing-drivers">Writing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">QCoDes API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers_api/index.html">Instrument Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QCoDeS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Examples of using QCoDeS</a></li>
      <li class="breadcrumb-item active">QCoDeS Example with Tektronix AWG5014</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/driver_examples/Qcodes example with Tektronix AWG5014C.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
  <p>This page was generated from
    <a class="reference external"
    href="https://github.com/qcodes/qcodes/blob/main/docs/examples/driver_examples/Qcodes example with Tektronix AWG5014C.ipynb">docs/examples/driver_examples/Qcodes example with Tektronix AWG5014C.ipynb</a>.
    Interactive online version:
    <a href="https://mybinder.org/v2/gh/qcodes/qcodes/main?filepath=docs/examples/driver_examples/Qcodes example with Tektronix AWG5014C.ipynb"><img
alt="Binder badge"
    src="https://mybinder.org/badge_logo.svg"
    style="vertical-align:text-bottom"></a>.
  </p>
  <script>
    if (document.location.host) {
      var p = document.currentScript.previousSibling.previousSibling;
      var a = document.createElement('a');
      a.innerHTML = 'View in <em>nbviewer</em>';
      a.href = `https://nbviewer.jupyter.org/url${
        (window.location.protocol == 'https:' ? 's/' : '/') +
        window.location.host +
        window.location.pathname.slice(0, -4) }ipynb`;
      a.classList.add('reference');
      a.classList.add('external');
      p.appendChild(a);
      p.appendChild(document.createTextNode('.'));
    }
  </script>
</div><section id="QCoDeS-Example-with-Tektronix-AWG5014">
<h1>QCoDeS Example with Tektronix AWG5014<a class="headerlink" href="#QCoDeS-Example-with-Tektronix-AWG5014" title="Link to this heading"></a></h1>
<section id="Table-of-contents">
<h2>Table of contents<a class="headerlink" href="#Table-of-contents" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#Imports-and-initialisation"><span class="std std-ref">Imports and initialisation</span></a></p></li>
<li><p><a class="reference internal" href="#SENDING-WAVEFORMS"><span class="std std-ref">Sending waveforms</span></a></p>
<ul>
<li><p><a class="reference internal" href="#GETTING-THEM-THERE-VIA-AN-.AWG-FILE"><span class="std std-ref">Via an .awg-file</span></a></p></li>
<li><p><a class="reference internal" href="#GETTING-THEM-THERE-BY-SENDING-WAVEFORMS-TO-LIST"><span class="std std-ref">Sending directly to list</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#Running-the-AWG-in-lazy-mode"><span class="std std-ref">Running in lazy mode</span></a></p></li>
</ul>
</section>
<section id="Imports-and-initialisation">
<h2>Imports and initialisation<a class="headerlink" href="#Imports-and-initialisation" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> nbagg

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.tektronix</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TektronixAWG5014</span><span class="p">,</span>  <span class="c1"># &lt;--- The instrument driver</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.tektronix.AWGFileParser</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">parse_awg_file</span><span class="p">,</span>  <span class="c1"># &lt;--- A helper function</span>
<span class="p">)</span>

<span class="n">awg1</span> <span class="o">=</span> <span class="n">TektronixAWG5014</span><span class="p">(</span><span class="s1">&#39;AWG1&#39;</span><span class="p">,</span> <span class="s1">&#39;TCPIP0::172.20.3.57::inst0::INSTR&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note: if you have had any initialisation problems, the VISA message queue of the instrument could be fouled up</span>
<span class="c1">#(e.g. if the cell above gave you back something like &#39;Connected to: 1.20000000E+009 ...&#39;)</span>
<span class="c1"># in that case, run the following command to reset the message queue</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">clear_message_queue</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>As with any other QCoDeS instrument, parameters can be set and get (gotten).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">awg1</span><span class="o">.</span><span class="n">ch3_state</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">awg1</span><span class="o">.</span><span class="n">ch2_offset</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">ch2_offset</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">awg1</span><span class="o">.</span><span class="n">ch2_offset</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p>A list of all available parameters can be found in the following manner:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">awg1</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">pars</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">awg1</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">param</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="SENDING-WAVEFORMS">
<h2>SENDING WAVEFORMS<a class="headerlink" href="#SENDING-WAVEFORMS" title="Link to this heading"></a></h2>
<p>There are two supported ways of sending waveforms to the AWG; by making an .awg file, sending and loading that, or by sending waveforms to the User Defined list one by one and putting them in the sequencer. The first method is generally faster.</p>
<section id="MAKING-SOME-WAVEFORMS">
<h3>MAKING SOME WAVEFORMS<a class="headerlink" href="#MAKING-SOME-WAVEFORMS" title="Link to this heading"></a></h3>
<p>First, we make a handful of pulse shapes and marker signals to send to the AWG. This should be done with numpy arrays.</p>
<p>Please note that the waveforms must <strong>not</strong> have values exceeding -1 to 1, and that the markers must <strong>only</strong> have values 0 or 1. Otherwise the AWG misinterprets the signals.</p>
<p>In this example, we only use two channels of the AWG, namely channel 1 and 3. Extending to one or more should be straightforward.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noofseqelems</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">noofpoints</span> <span class="o">=</span> <span class="mi">1200</span>
<span class="n">waveforms</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[]]</span>  <span class="c1"># one list for each channel</span>
<span class="n">m1s</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[]]</span>
<span class="n">m2s</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[]]</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">):</span>
    <span class="c1"># waveform and markers for channel 1</span>
    <span class="n">waveforms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">noofpoints</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">hanning</span><span class="p">(</span><span class="n">noofpoints</span><span class="p">))</span>
    <span class="n">m1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">noofpoints</span><span class="p">)</span>
    <span class="n">m1</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">noofpoints</span><span class="o">/</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">))]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">m1s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
    <span class="n">m2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">noofpoints</span><span class="p">)</span>
    <span class="n">m2s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>

    <span class="c1"># waveform and markers for channel two</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">noofpoints</span><span class="p">))</span>
    <span class="n">wf</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">noofpoints</span><span class="p">))</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">2</span>
    <span class="n">waveforms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
    <span class="n">m1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">noofpoints</span><span class="p">)</span>
    <span class="n">m1</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">noofpoints</span><span class="o">/</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">))]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">m1s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
    <span class="n">m2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">noofpoints</span><span class="p">)</span>
    <span class="n">m2s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We can visualise the waveforms and markers</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">411</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">412</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">413</span><span class="p">)</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">414</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Channel 1 waveform&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Channel 1 markers&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Channel 3 waveform&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Channel 3 markers&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">])</span>

<span class="n">elemnum</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># choose which element to plot</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">waveforms</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#e1cb66&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">m1s</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#FF4500&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">m2s</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#FF8C00&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">waveforms</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#800080&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">m1s</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#6A5ACD&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">m2s</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">elemnum</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#EE82EE&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="GETTING-THEM-THERE-VIA-AN-.AWG-FILE">
<h3>GETTING THEM THERE VIA AN .AWG FILE<a class="headerlink" href="#GETTING-THEM-THERE-VIA-AN-.AWG-FILE" title="Link to this heading"></a></h3>
<p>The fastest way to transfer waveforms to the AWG is by using an .awg file.</p>
<p>In addition to waveforms and markers, me must specify sequencing options for each sequence element.</p>
<p>In this example notebook, we just put in some random numbers.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sequencing options</span>

<span class="c1"># number of repetitions</span>
<span class="n">nreps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">)]</span>
<span class="c1"># Wait trigger (0 or 1)</span>
<span class="n">trig_waits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">noofseqelems</span>
<span class="c1"># Goto state</span>
<span class="n">goto_states</span> <span class="o">=</span> <span class="p">[((</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">noofseqelems</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">)]</span>
<span class="c1">#goto_states = [0]*noofseqelems</span>
<span class="c1"># Event jump</span>
<span class="n">jump_tos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">noofseqelems</span>
</pre></div>
</div>
</div>
<p>Then all the magic happens in the following function call (type help(make_send_and_load_awg_file) to see all possible input parameters):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">awg1</span><span class="o">.</span><span class="n">make_send_and_load_awg_file</span><span class="p">(</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">m1s</span><span class="p">,</span> <span class="n">m2s</span><span class="p">,</span>
                                 <span class="n">nreps</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">,</span>
                                 <span class="n">goto_states</span><span class="p">,</span> <span class="n">jump_tos</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>In order to build a local library of pulse sequences, one may generate and locally save the .awg file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">&#39;test_awg_file.awg&#39;</span><span class="p">)</span>
<span class="n">awgfile</span> <span class="o">=</span> <span class="n">awg1</span><span class="o">.</span><span class="n">make_and_save_awg_file</span><span class="p">(</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">m1s</span><span class="p">,</span> <span class="n">m2s</span><span class="p">,</span> <span class="n">nreps</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">,</span> <span class="n">goto_states</span><span class="p">,</span>
                                      <span class="n">jump_tos</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">filename</span><span class="o">=</span><span class="n">filepath</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>A saved .awg file may be loaded back into memrory using the helper function <code class="docutils literal notranslate"><span class="pre">parse_awg_file</span></code>, which returns a tuple containing: * A tuple matching the call signature of <code class="docutils literal notranslate"><span class="pre">awg1.make_and_save_awg_file</span></code> (see below) * A dictionary with all the instrument settings of the .awg file</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">callsig</span><span class="p">,</span> <span class="n">instdict</span><span class="p">)</span> <span class="o">=</span> <span class="n">parse_awg_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="p">(</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">m1s</span><span class="p">,</span> <span class="n">m2s</span><span class="p">,</span> <span class="n">nreps</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">,</span> <span class="n">goto_states</span><span class="p">,</span> <span class="n">jump_tos</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span> <span class="o">=</span> <span class="n">callsig</span>
</pre></div>
</div>
</div>
<p>To see how everything fits together, we may now upload the file we just parsed.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">awg1</span><span class="o">.</span><span class="n">make_send_and_load_awg_file</span><span class="p">(</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">m1s</span><span class="p">,</span> <span class="n">m2s</span><span class="p">,</span>
                                 <span class="n">nreps</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">,</span>
                                 <span class="n">goto_states</span><span class="p">,</span> <span class="n">jump_tos</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="GETTING-THEM-THERE-BY-SENDING-WAVEFORMS-TO-LIST">
<h3>GETTING THEM THERE BY SENDING WAVEFORMS TO LIST<a class="headerlink" href="#GETTING-THEM-THERE-BY-SENDING-WAVEFORMS-TO-LIST" title="Link to this heading"></a></h3>
<p>An alternative way to transfer waveforms to the AWG is by sending them directly to the waveform list and then putting them into the sequencer. This method is more explicit, but slower for large waveforms.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First clear up the waveform list and empty the sequencer</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">delete_all_waveforms_from_list</span><span class="p">()</span>
<span class="c1"># Then set the sequence length to the correct number lest not all sequence elements get uploaded</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">sequence_length</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Then transfer the waveforms to the list...</span>
<span class="k">for</span> <span class="n">elnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">wfmname</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;wfm</span><span class="si">{</span><span class="n">elnum</span><span class="si">:</span><span class="s1">03d</span><span class="si">}</span><span class="s1">ch</span><span class="si">{</span><span class="n">chnum</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">awg1</span><span class="o">.</span><span class="n">send_waveform_to_list</span><span class="p">(</span><span class="n">waveforms</span><span class="p">[</span><span class="n">chnum</span><span class="p">][</span><span class="n">elnum</span><span class="p">],</span> <span class="n">m1s</span><span class="p">[</span><span class="n">chnum</span><span class="p">][</span><span class="n">elnum</span><span class="p">],</span> <span class="n">m2s</span><span class="p">[</span><span class="n">chnum</span><span class="p">][</span><span class="n">elnum</span><span class="p">],</span> <span class="n">wfmname</span><span class="p">)</span>
<span class="c1">#...upload them to the sequencer...</span>
<span class="k">for</span> <span class="n">elnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">chnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">wfmname</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;wfm</span><span class="si">{</span><span class="n">elnum</span><span class="si">:</span><span class="s1">03d</span><span class="si">}</span><span class="s1">ch</span><span class="si">{</span><span class="n">chnum</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_waveform</span><span class="p">(</span><span class="n">wfmname</span><span class="p">,</span> <span class="n">chnum</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">elnum</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#...and set the sequence elements setting</span>
<span class="k">for</span> <span class="n">elnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">):</span>
    <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_goto_target_index</span><span class="p">(</span><span class="n">elnum</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">goto_states</span><span class="p">[</span><span class="n">elnum</span><span class="p">])</span>
    <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_loopcnt</span><span class="p">(</span><span class="n">nreps</span><span class="p">[</span><span class="n">elnum</span><span class="p">],</span> <span class="n">elnum</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_trigger_wait</span><span class="p">(</span><span class="n">elnum</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">[</span><span class="n">elnum</span><span class="p">])</span>
    <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_event_target_index</span><span class="p">(</span><span class="n">elnum</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">jump_tos</span><span class="p">[</span><span class="n">elnum</span><span class="p">])</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Running-the-AWG-in-lazy-mode">
<h2>Running the AWG in lazy mode<a class="headerlink" href="#Running-the-AWG-in-lazy-mode" title="Link to this heading"></a></h2>
<p>In “lazy” mode, the AWG continuously outputs a specific sequence element until the user forces a jump to another element (as opposed to running through the sequence in a particular predefined order). On the hardware side, this is still done by running the AWG in <code class="docutils literal notranslate"><span class="pre">sequence</span></code> mode, but with all sequence elements having their sequencer options set to infinite repetitions.</p>
<p>Below we assume that the above awg file has been loaded into the sequencer.</p>
<p>The parameter controlling the sequence element currently being run is called <code class="docutils literal notranslate"><span class="pre">sequence_pos</span></code>. Note that this is also accesible in non-lazy mode, although in that mode its return value quickly becomes obsolete.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># Set the corresponding sequencing options</span>
<span class="k">for</span> <span class="n">seq_elem</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">awg1</span><span class="o">.</span><span class="n">sequence_length</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">awg1</span><span class="o">.</span><span class="n">set_sqel_loopcnt_to_inf</span><span class="p">(</span><span class="n">seq_elem</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now jump around in a &quot;lazy&quot; way</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">sequence_pos</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">sequence_pos</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">sequence_pos</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">awg1</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>For completeness, we note that infinite repetitions of each sequence element can be achieved by setting the number of repetitions to 0 when casting the awg file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># number of repetitions</span>
<span class="n">nreps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">noofseqelems</span><span class="p">)]</span>  <span class="c1"># Infinite repetitions</span>

<span class="c1"># It doesn&#39;t matter what we set the next values to, but the lists need to exist and have the right length</span>

<span class="c1"># Wait trigger (0 or 1)</span>
<span class="n">trig_waits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">noofseqelems</span>
<span class="c1"># Goto state</span>
<span class="n">goto_states</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">noofseqelems</span>
<span class="c1"># Event jump</span>
<span class="n">jump_tos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">noofseqelems</span>

<span class="n">awg1</span><span class="o">.</span><span class="n">make_send_and_load_awg_file</span><span class="p">(</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">m1s</span><span class="p">,</span> <span class="n">m2s</span><span class="p">,</span>
                                 <span class="n">nreps</span><span class="p">,</span> <span class="n">trig_waits</span><span class="p">,</span>
                                 <span class="n">goto_states</span><span class="p">,</span> <span class="n">jump_tos</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Finally, close down the instrument.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">awg1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Qcodes%20example%20with%20Stanford%20SR86x%20with%20buffered%20readout.html" class="btn btn-neutral float-left" title="QCoDeS Example with Standford Research SR86x Lock-in Amplifier with Buffered Readout" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Qcodes%20example%20with%20Tektronix%20AWG70002A.html" class="btn btn-neutral float-right" title="QCoDeS Example with Tektronix AWG70002A" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>